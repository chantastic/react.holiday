---
layout: ../../layouts/RH2021.astro
title: "#12: What have we learned this week?"
date: "2021-12-12T12:00:00.000Z"
---

This week we've learned a how to migrate client-side apps to React 18. We [used the _new root API_](/2021/6), replaced the _legacy root callback_ [two](/2021/7) [ways](/2021/8), [opted in to batched state updates](/2021/9), and [opted out of batching](/2021/10) where necessary.

I'd like to test your knowledge with a few questions:

1. In React 17 some state updates are batched while others weren‚Äôt. Describe ‚Äî in your own words ‚Äî when you can't assume batching to happen
1. What _unstable_ API was used in React 17 to ensure that all state updates are batched?
1. What _new_ ReactDOM API is used to opt out of automatic batching in React 18?
1. What is one of the two recommended ways to run a function after React has rendered?

üê¶ [chantastic](https://chan.dev/twitter)

P.S.  
Let me know how you're holding up!  
Hit reply to this email and let me know what you think so far.

**Answers:**

1. In React 17, state updaters called directly in an event handler will always be batched. State updaters called outside of event handlers will not be batched. This can happen with async functions like `fetch` and `setTimeout`.
1. `unstable_batchedUpdates`
1. `ReactDOM.flushSync`
1. `setTimeout/requestIdleCallback` or callback prop
