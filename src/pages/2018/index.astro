---
import BaseHead from "../../components/BaseHead.astro";

const response = await fetch(
  `https://youtube.googleapis.com/youtube/v3/playlistItems?part=snippet%2CcontentDetails&maxResults=50&playlistId=PLnc_NxpmOxaPbyq_lEGZKWF7R3BbK3PSZ&key=${
    import.meta.env.PUBLIC_YOUTUBE_API_KEY
  }`
);
let allVideos = await response.json();
---

<html lang="en">
  <head>
    <BaseHead
      title="React Holiday — 2018"
      description="React Holiday — 2018"
      permalink={""}
    />
    <script
      src="https://cdn.usefathom.com/script.js"
      data-site="ZHUODSNX"
      defer
    ></script>
  </head>
  <body>
    <main>
      <a href="/">← Back to all</a>

      <h1>2018</h1>

      <ul>
        {
          allVideos.items.map((video, index) => (
            <li>
              <a href={`/2018/${index + 1}`}>
                #{index + 1} {video.snippet.title}
              </a>
            </li>
          ))
        }
      </ul>
    </main>
  </body>
</html>
